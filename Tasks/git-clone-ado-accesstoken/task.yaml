# This is a git repository cloning task for Dev Box

$schema: 1.0
name: reserved-git-clone-ado-accesstoken
description: Clone an Azure Dev Ops repository with access token.
author: Microsoft Corporation
command: ./main.ps1 -RepositoryUrl {{ repositoryUrl }} -Directory {{ directory }} -Branch {{ branch }} -At {{ at }}
parameters:
  repositoryUrl:
    default: ''
    type: string
    required: true
    description: The URL of the repository to clone.
  at:
    default: ''
    type: string
    required: true
    description: The access token to clone the repository.
  directory:
    default: C:\Workspaces
    type: string
    required: false
    description: |
      The directory under which the repository will be cloned. This is the
      equivalent of the working directory under which the git command will
      execute.
  branch:
    default: ''
    type: string
    required: false
    description: The branch to clone.
documentation:
  notes: |
    This task allows you to clone a repository with access token.
    So far this task ONLY support Azure Dev Ops repository.
  examples:
    - name: reserved-git-clone-ado-accesstoken
      description: Clone this repository into C:\Workspaces
      parameters:
        repositoryUrl: https://organization@dev.azure.com/organization/project-name/_git/sample-repo.name
        at: theaccesstoken
        directory: C:\Workspaces
    - name: reserved-git-clone-ado-accesstoken
      description: Clone this repository's feature/winui2.6 branch into C:\Workspaces
      parameters:
        repositoryUrl: https://organization.visualstudio.com/DefaultCollection/project-name/_git/sample-repo.name
        at: theaccesstoken
        directory: C:\Workspaces
        branch: feature/winui2.6
